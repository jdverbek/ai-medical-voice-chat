<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cardiologische AI Assistent - Geavanceerde Anamnese</title>
    <link rel="stylesheet" href="enhanced-styles.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè•</text></svg>">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üè•</span>
                    <div class="logo-text">
                        <h1>Cardiologische AI Assistent</h1>
                        <p>Geavanceerde Anamnese & Risico Assessment</p>
                    </div>
                </div>
                <div class="header-status" id="headerStatus">
                    <span class="status-indicator"></span>
                    <span class="status-text">Klaar voor gebruik</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Chat Container -->
            <div class="chat-container" id="chatContainer">
                <!-- Content will be dynamically loaded here -->
            </div>

            <!-- Sidebar with Information -->
            <aside class="info-sidebar">
                <div class="info-card">
                    <h3>üéØ Wat deze AI doet</h3>
                    <ul>
                        <li>Verzamelt volledige cardiologische anamnese</li>
                        <li>Voorkomt herhaalde vragen</li>
                        <li>Beoordeelt cardiovasculaire risicofactoren</li>
                        <li>Genereert professioneel medisch rapport</li>
                        <li>Ondersteunt NYHA en CCS classificatie</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3>üîí Privacy & Veiligheid</h3>
                    <ul>
                        <li>Alle gegevens blijven lokaal</li>
                        <li>Geen opslag van persoonlijke informatie</li>
                        <li>GDPR-compliant verwerking</li>
                        <li>Medische geheimhouding gewaarborgd</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h3>üìã Rapport Functies</h3>
                    <ul>
                        <li>Gestructureerde medische rapportage</li>
                        <li>PDF download voor dossier</li>
                        <li>Risico stratificatie</li>
                        <li>Behandelingsaanbevelingen</li>
                        <li>Follow-up planning</li>
                    </ul>
                </div>

                <div class="info-card technical-info">
                    <h3>‚öôÔ∏è Technische Specificaties</h3>
                    <ul>
                        <li>OpenAI Whisper spraakherkenning</li>
                        <li>Nederlandse taalverwerking</li>
                        <li>Cardiologie-gespecialiseerde AI</li>
                        <li>Real-time conversatie analyse</li>
                        <li>Adaptieve vraagstelling</li>
                    </ul>
                </div>
            </aside>
        </main>

        <!-- Footer -->
        <footer class="app-footer">
            <div class="footer-content">
                <div class="footer-section">
                    <h4>Medische Disclaimer</h4>
                    <p>Deze AI assistent is een hulpmiddel voor anamnese verzameling en vervangt geen medisch advies. Raadpleeg altijd uw cardioloog voor diagnose en behandeling.</p>
                </div>
                <div class="footer-section">
                    <h4>Technische Ondersteuning</h4>
                    <p>Voor technische vragen of problemen met de applicatie, neem contact op met de IT-afdeling van uw ziekenhuis.</p>
                </div>
                <div class="footer-section">
                    <h4>Versie Informatie</h4>
                    <p>Cardiologische AI Assistent v2.0<br>
                    Laatste update: <span id="lastUpdate"></span></p>
                </div>
            </div>
        </footer>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <h3>AI Assistent wordt geladen...</h3>
            <p>Even geduld terwijl we de geavanceerde cardiologie modules initialiseren.</p>
        </div>
    </div>

    <!-- Error Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script src="enhanced-medical-knowledge.js"></script>
    <script src="enhanced-question-generator.js"></script>
    <script src="conversation-engine-enhanced.js"></script>
    <script src="medical-report-generator.js"></script>
    <script src="pdf-report-generator.js"></script>
    <script src="app-fixed.js"></script>

    <script>
        // Initialize last update timestamp
        document.addEventListener('DOMContentLoaded', () => {
            const lastUpdateElement = document.getElementById('lastUpdate');
            if (lastUpdateElement) {
                lastUpdateElement.textContent = new Date().toLocaleDateString('nl-NL');
            }

            // Hide loading overlay after initialization
            setTimeout(() => {
                const loadingOverlay = document.getElementById('loadingOverlay');
                if (loadingOverlay) {
                    loadingOverlay.style.opacity = '0';
                    setTimeout(() => {
                        loadingOverlay.style.display = 'none';
                    }, 500);
                }
            }, 2000);
        });

        // Global error handler
        window.addEventListener('error', (event) => {
            console.error('Global error:', event.error);
            
            // Show user-friendly error message
            if (window.app) {
                window.app.showError('Er is een onverwachte fout opgetreden. Probeer de pagina te vernieuwen.');
            }
        });

        // Service worker registration for offline support (optional)
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/sw.js')
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }
    </script>
</body>
</html>

